<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Graph Ratings</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
        <link href="../css/styles.css" rel="stylesheet">
        <script type="text/x-mathjax-config">
        MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
        </script>
        <script type="text/javascript" async
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
        </script>
        <!-- Import Vega 3 -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/vega/3.0.7/vega.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/vega-embed/3.0.0-rc6/vega-embed.min.js"></script>
        <!-- <script src="https://code.jquery.com/jquery-3.1.1.slim.min.js" integrity="sha384-A7FZj7v+d/sdmMqp/nOQwliLvUsJfDHW+k9Omg/a/EheAdgtzNs3hpfag6Ed950n" crossorigin="anonymous"></script> -->
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/4.1.2/papaparse.js"></script>
    </head>
    <body>
        <!-- Navbar -->
        <nav class="navbar bg-inverse navbar-toggleable-sm navbar-inverse">
            <div class="container">
                <a class="navbar-brand" href="../index.html">The Website</a>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" role="button">
                                Ratings
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                                <a class="dropdown-item" href="ncaabb_ratings.html">College Basketball</a>
                                <a class="dropdown-item disabled" href="#">College Football</a>
                                <a class="dropdown-item disabled" href="#">NBA</a>
                                <a class="dropdown-item disabled" href="#">NFL</a>
                            </div>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" role="button">
                                Visualizations
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                                <a class="dropdown-item" href="basketball_trees.html">College Basketball Win Trees</a>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
            <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="true" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
            </button>
        </nav>
        <div class="container">
            <!-- Intro block -->
            <section class="jumbotron text-center">
                <div class="container">
                    <h1 class="jumbotron-heading">College Basketball Ratings</h1>
                    <p class="text-muted">
                        Rating methodology can be found <a href="graph_ratings.html">here</a>
                    </p>
                </div>
            </section>
            <div class="card">
                <h6 class="card-header">Percent of Games Predicted Correctly (cumulative)</h6>
                <div class="card-block">
                    <div class="row">
                        <div id="vis" class="col-md-7 text-center">>
                            <!-- ratings accuracy plot -->
                        </div>
                        <script type="text/javascript">
                            var spec = "../vega/visualizations/winp.json";
                            var options = {
                                "actions": false,
                                "height": 250,
                                "width": 300
                            }
                            vegaEmbed('#vis', spec, options)
                                .then(function(result) {})
                                .catch(console.error);
                        </script>
                        <div class="col-md-5 my-auto">
                            <p class="text-muted">
                                This plot shows percentage of total games predicted correctly throughout the season. The first predictions are on 11/26, the day after the 2016/17 D1 basketball graph became connected. Prediction accuracy increases as more games are played until just before New Years. This coincides with the beginning of the conference part of the season when games are more competitive making prediction more difficult.
                            </p>
                            <p>Total Correct: 70.2%</p>
                        </div>
                    </div>
                </div>
            </div>
            <p></p>
            <div class="text-center" style="padding-bottom:20px">
                <h4>2016-2017 Ratings</h4>
                <p class="text-muted">Last updated 4/4/17</p>
            </div>
            <div class="ratings">
                <!-- ratings table goes here -->
                <script>
                    function create_table(data) {
                        var table = $('<table><tr><th></th><th>School</th><th>Rating</th></tr></table>')
                        $(data).each(function (i, row_data) {
                            var row = $('<tr></tr>')
                            row.append('<td>' + (i+1) + '</td>')
                            $(row_data).each(function (j, cell_data) {
                                row.append($('<td>' + cell_data + '</td>'))
                            })
                            table.append(row)
                        })
                        return table
                    }

                    $.ajax({
                        type: "GET",
                        url: "../ratings/ratings.csv",
                        success: function (data) {
                            $('.ratings').append(create_table(Papa.parse(data).data))
                        }
                    })
                </script>
            </div>
        </div>
        <hr>
        <footer>
            <ul class="bottom_ul">
                <li>&copy;2017</li>
                <li><a href="about.html">About</a></li>
                <li><a href="contact.html">Contact</a></li>
                <li><a href="legal.html">Terms of Use</a></li>
            </ul>
        </footer>
        <!-- Bootstrap files from CDN -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" crossorigin="anonymous"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script>
    </body>
</html>
